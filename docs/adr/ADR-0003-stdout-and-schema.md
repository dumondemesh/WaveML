# ADR-0003 — Stdout-контракт и Schema как единый интерфейс (F1/P1)

**Контекст.** Канонизация (I1) должна быть воспроизводимой и машинно проверяемой. 
Источники несовместимостей: «болтливый stdout», дрейф формата графа/отчёта, различие версий инструментов.

**Решение.**
1) **Stdout-контракт**: `wavectl forge --print-id` выводит **ровно** одну строку из 64 hex-символов — и ничего больше.
   Любые пояснения/объяснения уходят в `forge-explain` или stderr/лог JSON.
2) **Schema-валидация**: все входные графы соответствуют `spec/WMLB-1.1.schema.json`, а все отчёты — `spec/WFR-1.0.0.schema.json`.
   В CI запускается `schema_gate.sh`, падение при несоответствии.
3) **Единая точка правды**: статусы фаз/инвариантов публикуются **только** на основе валидных `.wfr` из CI.

**Последствия.**
- I1 получает строгую механическую проверку (детерминизм ID и валидность форматов).
- Логи становятся пригодными для машинной агрегации.
- Разработчикам: меньше «случайного» красного CI, потому что формат стабилен.
