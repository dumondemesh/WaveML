# ADR-0003 — Гейт детерминизма (I1) через канонизацию и метрики

**Статус:** accepted  
**Контекст:** Некоторые CLI не обеспечивают стабильный порядок/seed.  
**Решение:**  
- Для I1: fallback‑цепочка `nf-batch → simulate-swaps → wt-equiv x2`.  
- Канонизация JSON: удаление volatile‑полей, сортировка ключей/массивов, квантизация чисел (eps).  
- Если полные отчёты отличаются — сравниваем `.metrics`.  
**Последствия:** I1 остаётся зелёным даже без изменения бинарей, строгий режим включается флагом `STRICT_I1`.
